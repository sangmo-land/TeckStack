import{r as i,j as e,H as S,L as q}from"./app-BMXGkdR1.js";import{X as z,M as L,C as $,a as I}from"./Dropdown-qtfHSY1o.js";import{A as C,C as M,h as A,v as E}from"./vsc-dark-plus-D-ry3mze.js";import{c as P}from"./createLucideIcon-C0iqZS47.js";import{C as R}from"./clock-mEmrwQEf.js";import{C as k}from"./code-xFmNxz3f.js";import{A as F}from"./arrow-right-Cc0nQUVY.js";import{C as H}from"./chevron-right-D9vQt9kp.js";import{L as T}from"./lock-LCo20e-C.js";import"./transition-DcSDao7h.js";const D=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],O=P("circle-play",D);function U({snippet:l}){const[b,d]=i.useState(!1),c=async()=>{try{await navigator.clipboard.writeText(l.code),d(!0),setTimeout(()=>d(!1),2e3)}catch(o){console.error("Failed to copy:",o)}},f=o=>({mysql:"from-blue-500 to-cyan-500",sql:"from-blue-500 to-cyan-500",php:"from-purple-500 to-indigo-500",javascript:"from-yellow-500 to-orange-500",python:"from-green-500 to-emerald-500",java:"from-red-500 to-orange-500",css:"from-pink-500 to-purple-500",html:"from-orange-500 to-red-500"})[o?.toLowerCase()]||"from-slate-500 to-slate-600",x=o=>({mysql:"sql",oracle:"sql",sql:"sql",javascript:"javascript",php:"php",python:"python",java:"java",css:"css",html:"markup",json:"json",bash:"bash",shell:"bash",plsql:"sql",tsql:"sql"})[o?.toLowerCase()]||"text";return e.jsxs("div",{className:"bg-slate-900/80 rounded-lg border border-slate-700/50 overflow-hidden mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-slate-800/50 border-b border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-sm font-medium text-slate-300",children:l.title}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full bg-gradient-to-r ${f(l.language)} text-white font-medium`,children:l.language?.toUpperCase()||"CODE"})]}),e.jsx("button",{onClick:c,className:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-700/50 hover:bg-slate-700 text-slate-300 text-sm rounded-md transition-colors",children:b?e.jsxs(e.Fragment,{children:[e.jsx(I,{size:14,className:"text-green-400"}),e.jsx("span",{className:"text-green-400",children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{size:14}),e.jsx("span",{children:"Copy"})]})})]}),l.description&&e.jsx("div",{className:"px-4 py-2 bg-slate-800/30 text-sm text-slate-400 border-b border-slate-700/30",children:l.description}),e.jsx("div",{className:"overflow-x-auto bg-slate-950/80",children:e.jsx(A,{language:x(l.language),style:E,customStyle:{margin:0,padding:"1rem",background:"rgba(15, 23, 42, 0.8)",fontSize:"0.875rem",lineHeight:"1.5"},showLineNumbers:!0,wrapLines:!0,lineNumberStyle:{color:"#64748b",paddingRight:"1em",userSelect:"none"},children:l.code})})]})}function ee({auth:l,course:b,chapters:d}){const[c,f]=i.useState(!0),[x,o]=i.useState(null),[v,_]=i.useState({}),n=i.useMemo(()=>{const t=[],r=(p=[])=>{p.forEach(a=>{t.push(a),a.children&&a.children.length&&r(a.children)})};return r(d||[]),t},[d]);i.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("chapter");r?o(Number(r)):n.length>0},[n]);const j=t=>{o(t);const r=new URL(window.location.href);r.searchParams.set("chapter",t),window.history.pushState({},"",r),window.innerWidth<768&&f(!1)},s=i.useMemo(()=>n.find(t=>t.id===x),[n,x]),g=s?n.findIndex(t=>t.id===s.id):-1,m=g>0?n[g-1]:null,u=g>=0&&g<n.length-1?n[g+1]:null,w=t=>{_(r=>({...r,[t]:!r[t]}))},N=(t,r=0)=>{const p=t.children&&t.children.length>0,a=x===t.id,y=v[t.id]||a||p&&t.children.some(h=>h.id===x);return e.jsxs("div",{className:"mb-1",children:[e.jsxs("div",{className:`
                        flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all duration-200 group
                        ${a?"bg-gradient-to-r from-blue-600/20 to-indigo-600/20 text-blue-400 border border-blue-500/30 shadow-[0_0_15px_rgba(59,130,246,0.1)]":"text-slate-400 hover:bg-slate-800/50 hover:text-white border border-transparent"}
                        ${r>0?"ml-4":""}
                    `,onClick:h=>{p&&w(t.id),j(t.id)},children:[p&&e.jsx("button",{onClick:h=>{h.stopPropagation(),w(t.id)},className:`p-1 rounded-full transition-colors ${a?"bg-blue-500/20 text-blue-400":"hover:bg-slate-700 text-slate-500 group-hover:text-slate-300"}`,children:y?e.jsx($,{size:14}):e.jsx(H,{size:14})}),e.jsxs("div",{className:"flex-1 text-sm font-medium whitespace-nowrap flex gap-2 items-center",children:[e.jsx("span",{className:`font-mono text-xs opacity-60 ${a?"text-blue-400":"text-slate-500"}`,children:t.full_number}),e.jsx("span",{children:t.title})]}),t.is_free&&e.jsx("span",{className:"text-[10px] bg-green-500/20 text-green-400 px-1 rounded",children:"Free"}),!t.is_free&&!l.user&&e.jsx(T,{size:12})]}),p&&y&&e.jsx("div",{className:"mt-1 border-l border-slate-800 ml-2 pl-2",children:t.children.map(h=>N(h,r+1))})]},t.id)};return e.jsxs("div",{className:"h-[100dvh] w-full bg-slate-950 flex flex-col overflow-hidden",children:[e.jsx(S,{title:`${s?s.title:"Course Content"} - ${b.title}`}),e.jsxs("header",{className:"h-16 bg-slate-900 border-b border-slate-800 flex items-center justify-between px-4 sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>f(!c),className:"flex items-center gap-2 p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:[c?e.jsx(z,{size:20}):e.jsx(L,{size:20}),e.jsx("span",{className:"font-medium text-sm",children:"Course Content"})]}),e.jsxs(q,{href:`/courses/${b.slug}`,className:"flex items-center gap-2 text-slate-300 hover:text-white transition-colors",children:[e.jsx(C,{size:18}),e.jsx("span",{className:"hidden sm:inline font-medium text-sm",children:"Back to Course Info"})]}),e.jsx("div",{className:"h-6 w-px bg-slate-800 mx-2"}),e.jsx("h1",{className:"text-white font-bold truncate max-w-xs sm:max-w-md",children:b.title})]}),e.jsx("div",{className:"flex items-center gap-4"})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("aside",{className:`
                        fixed inset-y-16 left-0 z-40 w-80 bg-slate-900/95 backdrop-blur-sm border-r border-slate-800 transform transition-transform duration-300 ease-in-out overflow-auto
                        ${c?"translate-x-0":"-translate-x-full"}
                        lg:relative lg:inset-auto lg:translate-x-0 lg:block
                        ${!c&&"lg:hidden"} 
                    `,children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-4",children:"Course Content"}),d.map(t=>N(t))]})}),e.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-slate-950 p-4 lg:p-8 relative w-full",children:s?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-400 font-mono text-sm mb-4",children:[e.jsxs("span",{className:"px-3 py-1 bg-blue-500/10 rounded-full border border-blue-500/20 shadow-[0_0_10px_rgba(59,130,246,0.1)]",children:["Chapter ",s.full_number]}),s.duration_minutes&&e.jsxs("span",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx(R,{size:14}),s.duration_minutes," ","min read"]})]}),e.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold bg-gradient-to-r from-white to-slate-400 bg-clip-text text-transparent mb-8 tracking-tight leading-tight break-words",children:s.title})]}),e.jsxs("div",{className:"space-y-12",children:[s.description&&e.jsx("div",{className:"text-slate-300 text-2xl leading-relaxed font-light border-l-4 border-blue-500/50 pl-6 py-4 bg-gradient-to-r from-blue-900/10 to-transparent rounded-r-lg",children:s.description}),s.video_url&&e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl blur opacity-25 group-hover:opacity-40 transition duration-1000 group-hover:duration-200"}),e.jsx("div",{className:"relative bg-black rounded-xl overflow-hidden border border-slate-800 shadow-2xl ring-1 ring-white/10",children:e.jsx("div",{className:"aspect-video w-full",children:e.jsx("iframe",{src:s.video_url,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})]}),s.content&&e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-2xl p-8 lg:p-12 text-slate-300 shadow-xl ring-1 ring-white/5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),e.jsx("div",{className:`relative prose prose-xl md:prose-2xl prose-invert prose-slate max-w-none \r
                                            prose-p:text-slate-300 prose-p:leading-loose prose-headings:text-slate-100 prose-headings:font-bold \r
                                            prose-li:text-slate-300 prose-strong:text-white prose-a:text-blue-400 hover:prose-a:text-blue-300 \r
                                            prose-code:text-blue-200 prose-code:bg-blue-900/30 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:before:content-none prose-code:after:content-none\r
                                            prose-blockquote:border-l-blue-500 prose-blockquote:bg-slate-800/50 prose-blockquote:px-6 prose-blockquote:py-2 prose-blockquote:rounded-r-lg prose-blockquote:not-italic`,dangerouslySetInnerHTML:{__html:s.content}})]}),s.code_snippets&&s.code_snippets.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(k,{className:"text-blue-400"}),"Code Snippets"]}),s.code_snippets.map(t=>e.jsx(U,{snippet:t},t.id))]})]}),e.jsxs("div",{className:"mt-12 flex flex-col sm:flex-row items-center justify-between gap-4 pt-8 border-t border-slate-800",children:[e.jsxs("button",{onClick:()=>m&&j(m.id),disabled:!m,className:`
                                        w-full sm:w-auto justify-between sm:justify-start
                                        group flex items-center gap-4 px-6 py-4 rounded-xl font-medium transition-all duration-300 border
                                        ${m?"text-slate-300 hover:text-white bg-slate-800/50 hover:bg-slate-800 border-slate-700 hover:border-slate-600 hover:shadow-lg hover:-translate-y-0.5":"text-slate-600 bg-slate-900 border-slate-800 cursor-not-allowed opacity-50"}
                                    `,children:[e.jsx("div",{className:`p-2 rounded-full ${m?"bg-slate-700 group-hover:bg-slate-600":"bg-slate-800"}`,children:e.jsx(C,{size:20})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:"Previous Lesson"}),e.jsx("div",{className:"text-sm font-medium text-slate-300 group-hover:text-blue-400 transition-colors",children:m?.title||"None"})]})]}),e.jsxs("button",{onClick:()=>u&&j(u.id),disabled:!u,className:`
                                        w-full sm:w-auto justify-between sm:justify-end
                                        group flex items-center gap-4 px-6 py-4 rounded-xl font-medium transition-all duration-300 border
                                        ${u?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white border-transparent hover:shadow-[0_0_20px_rgba(37,99,235,0.3)] hover:-translate-y-0.5":"bg-slate-800 text-slate-500 border-slate-700 cursor-not-allowed opacity-50"}
                                    `,children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-blue-200 uppercase tracking-wider mb-1",children:"Next Lesson"}),e.jsx("div",{className:"text-sm font-bold",children:u?.title||"Completed"})]}),e.jsx("div",{className:`p-2 rounded-full ${u?"bg-white/20":"bg-slate-700"}`,children:e.jsx(F,{size:20})})]})]})]}):e.jsx("div",{className:"max-w-3xl mx-auto text-center py-20",children:e.jsxs("div",{className:"bg-slate-900/50 p-8 rounded-2xl border border-slate-800 inline-block mb-6",children:[e.jsx(O,{size:48,className:"text-blue-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Select a chapter to start learning"}),e.jsx("p",{className:"text-slate-400",children:"Choose a section from the sidebar to view its content."})]})})})]})]})}export{ee as default};
